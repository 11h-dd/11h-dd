<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <!-- 最新版本的 Bootstrap 核心 CSS 文件 -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css"
    integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
</head>

<body>
  <div class="f">
    <form class="form-horizontal" action="" enctype="multipart/form-data">
      <div class="form-group">
        <label for="inputEmail3" class="col-sm-2 control-label">姓名</label>
        <div class="col-sm-8">
          <input type="text" class="form-control" placeholder="姓名" name="uname">
        </div>
      </div>

      <div class="form-group">
        <label for="inputEmail3" class="col-sm-2 control-label">头像</label>
        <div class="col-sm-8">
          <input type="file" id="exampleInputFile">
        </div>
      </div>

      <div class="form-group">
        <label for="inputEmail3" class="col-sm-2 control-label">电话</label>
        <div class="col-sm-8">
          <input type="number" class="form-control" placeholder="电话" name="phone">
        </div>
      </div>

      <div class="form-group">
        <label for="inputEmail3" class="col-sm-2 control-label">邮箱</label>
        <div class="col-sm-8">
          <input type="email" class="form-control" placeholder="邮箱" name="email">
        </div>
      </div>
      <div class="form-group">
        <label for="inputEmail3" class="col-sm-2 control-label">性别</label>
        <label class="col-sm-2 control-label">
          <input type="radio" id="optionsRadios1" value="option1" checked name="gender"> 男
        </label>
        <label class="col-sm-2 control-label">
          <input type="radio" id="optionsRadios2" value="option2" name="gender"> 女
        </label>
      </div>

      <div class="form-group">
        <label for="inputEmail3" class="col-sm-2 control-label">年龄</label>
        <div class="col-sm-8">
          <input type="number" class="form-control" placeholder="年龄" name="age">
        </div>
      </div>

      <div class="form-group">
        <label for="inputEmail3" class="col-sm-2 control-label">简介</label>
        <div class="col-sm-8">
          <textarea class="form-control" rows="3" name="text"></textarea>
        </div>
      </div>

      <div class="form-group">
        <div class="col-sm-offset-2 col-sm-10">
          <button type="submit" class="btn btn-default">提交</button>
          <button type="reset" class="btn btn-default">重置</button>
        </div>
      </div>
    </form>

  </div>
</body>
<script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.js"></script>
<script>
  //表单的提交事件
  $('form').submit(function (e) {
    //组织表单的提交事件
    e.preventDefault();
    var formdata = new FormData(document.querySelector('form'))
    // for (var key of formdata.keys()) {
    //   console.log(key, formdata.get(key));
    // }
    var xhr = new XMLHttpRequest()
    xhr.onload = function () {
      var res = JSON.parse(xhr.responseText)
      alert(res.message)
    }
    xhr.open('POST', 'http://www.liulongbin.top:3006/api/formdata')
    xhr.send(formdata)

  })

  //实现文件上传功能
  $('#exampleInputFile').on('change', function () {
    var formdata = new FormData()
    //文件上传
    //发起请求 http://121.5.153.184:3000/upload 文件的属性名:attrName
    formdata.append('attrName', this.files[0])
    //之后发请求
    var xhr = new XMLHttpRequest()
    xhr.onload = function () {
      var res = JSON.parse(xhr.responseText)
      console.log(res)
    }
    xhr.open('post', 'http://192.168.82.101:3000/upload')
    xhr.send(formdata)

  })
</script>
<style>
  .f {
    margin: 20px;
  }
</style>

</html>